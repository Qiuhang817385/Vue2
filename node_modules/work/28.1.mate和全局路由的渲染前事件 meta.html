<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
   
    <title>Document</title>
</head>
<body>
   
        <div id="app"></div>
        <script src="../vue/dist/vue.js"></script>
        <!-- 1引包 -->
        <script src="../vue/dist/vue-router.js"></script>
        <script>
            //全局变量
            var isLogin = false;

            var Login = {
                template:`<div>我是登陆界面</div>`,
                created:function() {
                    isLogin = true;
                },
            }

            var Music = {
                template:`<div>我是音乐界面</div>`,
            } 

            var router = new VueRouter();
            //可以多次的追加路由规则,动态的获取路由规则
            router.addRoutes([
                //默认路由首页
            { path:'/',redirect:{name:'login1'}}
            ,

                        { name:'login1',path:'/login',component:Login},
                        { name:'music',
                        path:'/music',
                        component:Music,
                        meta:{
                            // meta:{ isChecked:true }}给未来路由的权限控制,路由守卫
                            isChecked:true
                        }
                       } 
                ]);//更加灵活
          router.beforeEach(function(to,from,next){
            //   console.log(from);
            //   console.log(to);
            // next()//不调用就会卡住
            //如果要验证,不要放行
            //music的meta值是true,所以取反,false之后不会放行
            if(!to.meta.isChecked){
                next();//不调用就会卡住
                
            }else{
                //alert('aaa');
                if(isLogin){
                    next();//放行
                    // next(false) //取消用户导航
                    //重定向
                }else{
                    alert('aaa');
                    //重定向
                    //可以给url,可以给锚点值
                    //可以给对象
                     next({name:'login1'})
                }
            }
          })
            //6:指定路由改变的局部位置
            var App = {
                template:`
                
                    <div>
                            <router-link :to="{name:'login1'}">登陆</router-link>
                            <router-link :to="{name:'music'}">听歌</router-link>
                      <router-view></router-view>    
                    </div>
                `
            }
            //5,将配置好的路由对象交给vue中
            new Vue({
                el:'#app',
                router:router,
                components:{
                    app:App
                },
                template:`
                    <app/>                
                `,

            })
        
        </script>
</body>
</html>